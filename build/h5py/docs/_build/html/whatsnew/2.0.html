<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>What’s new in h5py 2.0 &mdash; h5py 2.5.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.5.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="h5py 2.5.0 documentation" href="../index.html" />
    <link rel="up" title="“What’s new” documents" href="index.html" />
    <link rel="next" title="Bug Reports &amp; Contributions" href="../contributing.html" />
    <link rel="prev" title="What’s new in h5py 2.1" href="2.1.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../contributing.html" title="Bug Reports &amp; Contributions"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="2.1.html" title="What’s new in h5py 2.1"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">h5py 2.5.0 documentation</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">&#8220;What&#8217;s new&#8221; documents</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="what-s-new-in-h5py-2-0">
<h1>What&#8217;s new in h5py 2.0<a class="headerlink" href="#what-s-new-in-h5py-2-0" title="Permalink to this headline">¶</a></h1>
<p>HDF5 for Python (h5py) 2.0 represents the first major refactoring of the h5py
codebase since the project&#8217;s launch in 2008.  Many of the most important
changes are behind the scenes, and include changes to the way h5py interacts
with the HDF5 library and Python.  These changes have substantially
improved h5py&#8217;s stability, and make it possible to use more modern versions
of HDF5 without compatibility concerns.  It is now also possible to use
h5py with Python 3.</p>
<div class="section" id="enhancements-unlikely-to-affect-compatibility">
<h2>Enhancements unlikely to affect compatibility<a class="headerlink" href="#enhancements-unlikely-to-affect-compatibility" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>HDF5 1.8.3 through 1.8.7 now work correctly and are officially supported.</li>
<li>Python 3.2 is officially supported by h5py!  Thanks especially to
Darren Dale for getting this working.</li>
<li>Fill values can now be specified when creating a dataset.  The fill time is
H5D_FILL_TIME_IFSET for contiguous datasets, and H5D_FILL_TIME_ALLOC for
chunked datasets.</li>
<li>On Python 3, dictionary-style methods like Group.keys() and Group.values()
return view-like objects instead of lists.</li>
<li>Object and region references now work correctly in compound types.</li>
<li>Zero-length dimensions for extendible axes are now allowed.</li>
<li>H5py no longer attempts to auto-import ipython on startup.</li>
<li>File format bounds can now be given when opening a high-level File object
(keyword &#8220;libver&#8221;).</li>
</ul>
</div>
<div class="section" id="changes-which-may-break-existing-code">
<h2>Changes which may break existing code<a class="headerlink" href="#changes-which-may-break-existing-code" title="Permalink to this headline">¶</a></h2>
<div class="section" id="supported-hdf5-python-versions">
<h3>Supported HDF5/Python versions<a class="headerlink" href="#supported-hdf5-python-versions" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>HDF5 1.6.X is no longer supported on any platform; following the release of
1.6.10 some time ago, this branch is no longer maintained by The HDF Group.</li>
<li>Python 2.6 or later is now required to run h5py.  This is a consequence of
the numerous changes made to h5py for Python 3 compatibility.</li>
<li>On Python 2.6, unittest2 is now required to run the test suite.</li>
</ul>
</div>
<div class="section" id="group-dataset-and-datatype-constructors-have-changed">
<h3>Group, Dataset and Datatype constructors have changed<a class="headerlink" href="#group-dataset-and-datatype-constructors-have-changed" title="Permalink to this headline">¶</a></h3>
<p>In h5py 2.0, it is no longer possible to create new groups, datasets or
named datatypes by passing names and settings to the constructors directly.
Instead, you should use the standard Group methods create_group and
create_dataset.</p>
<p>The File constructor remains unchanged and is still the correct mechanism for
opening and creating files.</p>
<p>Code which manually creates Group, Dataset or Datatype objects will have to
be modified to use create_group or create_dataset.  File-resident datatypes
can be created by assigning a NumPy dtype to a name
(e.g. mygroup[&#8220;name&#8221;] = numpy.dtype(&#8216;S10&#8217;)).</p>
</div>
<div class="section" id="unicode-is-now-used-for-object-names">
<h3>Unicode is now used for object names<a class="headerlink" href="#unicode-is-now-used-for-object-names" title="Permalink to this headline">¶</a></h3>
<p>Older versions of h5py used byte strings to represent names in the file.
Starting with version 2.0, you may use either byte or unicode strings to create
objects, but object names (obj.name, etc) will generally be returned as Unicode.</p>
<p>Code which may be affected:</p>
<ul class="simple">
<li>Anything which uses &#8220;isinstance&#8221; or explicit type checks on names, expecting
&#8220;str&#8221; objects.  Such checks should be removed, or changed to compare to
&#8220;basestring&#8221; instead.</li>
<li>In Python 2.X, other parts of your application may complain if they are
handed Unicode data which can&#8217;t be encoded down to ascii.  This is a
general problem in Python 2.</li>
</ul>
</div>
<div class="section" id="file-objects-must-be-manually-closed">
<h3>File objects must be manually closed<a class="headerlink" href="#file-objects-must-be-manually-closed" title="Permalink to this headline">¶</a></h3>
<p>With h5py 1.3, when File objects (or low-level FileID) objects went out of
scope, the corresponding HDF5 file was closed.  This led to surprising
behavior, especially when files were opened with the H5F_CLOSE_STRONG flag;
&#8220;losing&#8221; the original File object meant that all open groups and datasets
suddenly became invalid.</p>
<p>Beginning with h5py 2.0, files must be manually closed, by calling the &#8220;close&#8221;
method or by using the file object as a context manager.  If you forget to
close a file, the HDF5 library will try to close it for you when the
application exits.</p>
<p>Please note that opening the same file multiple times (i.e. without closing
it first) continues to result in undefined behavior.</p>
</div>
<div class="section" id="changes-to-scalar-slicing-code">
<h3>Changes to scalar slicing code<a class="headerlink" href="#changes-to-scalar-slicing-code" title="Permalink to this headline">¶</a></h3>
<p>When a scalar dataset was accessed with the syntax <tt class="docutils literal"><span class="pre">dataset[()]</span></tt>, h5py
incorrectly returned an ndarray.  H5py now correctly returns an array
scalar.  Using <tt class="docutils literal"><span class="pre">dataset[...]</span></tt> on a scalar dataset still returns an ndarray.</p>
</div>
<div class="section" id="array-scalars-now-always-returned-when-indexing-a-dataset">
<h3>Array scalars now always returned when indexing a dataset<a class="headerlink" href="#array-scalars-now-always-returned-when-indexing-a-dataset" title="Permalink to this headline">¶</a></h3>
<p>When using datasets of compound type, retrieving a single element incorrectly
returned a tuple of values, rather than an instance of <tt class="docutils literal"><span class="pre">numpy.void_</span></tt> with the
proper fields populated.  Among other things, this meant you couldn&#8217;t do
things like <tt class="docutils literal"><span class="pre">dataset[index][field]</span></tt>.  H5py now always returns an array scalar,
except in the case of object dtypes (references, vlen strings).</p>
</div>
<div class="section" id="reading-object-like-data-strips-special-type-information">
<h3>Reading object-like data strips special type information<a class="headerlink" href="#reading-object-like-data-strips-special-type-information" title="Permalink to this headline">¶</a></h3>
<p>In the past, reading multiple data points from dataset with vlen or reference
type returned a Numpy array with a &#8220;special dtype&#8221; (such as those created
by <tt class="docutils literal"><span class="pre">h5py.special_dtype()</span></tt>).  In h5py 2.0, all such arrays now have a generic
Numpy object dtype (<tt class="docutils literal"><span class="pre">numpy.dtype('O')</span></tt>).  To get a copy of the dataset&#8217;s
dtype, always use the dataset&#8217;s dtype property directly (<tt class="docutils literal"><span class="pre">mydataset.dtype</span></tt>).</p>
</div>
<div class="section" id="the-selections-module-has-been-removed">
<h3>The selections module has been removed<a class="headerlink" href="#the-selections-module-has-been-removed" title="Permalink to this headline">¶</a></h3>
<p>Only numpy-style slicing arguments remain supported in the high level interface.
Existing code which uses the selections module should be refactored to use
numpy slicing (and <tt class="docutils literal"><span class="pre">numpy.s_</span></tt> as appropriate), or the standard C-style HDF5
dataspace machinery.</p>
</div>
<div class="section" id="the-h5error-exception-class-has-been-removed-along-with-h5py-h5e">
<h3>The H5Error exception class has been removed (along with h5py.h5e)<a class="headerlink" href="#the-h5error-exception-class-has-been-removed-along-with-h5py-h5e" title="Permalink to this headline">¶</a></h3>
<p>All h5py exceptions are now native Python exceptions, no longer inheriting
from H5Error.  RuntimeError is raised if h5py can&#8217;t figure out what exception
is appropriate... every instance of this behavior is considered a bug.  If you
see h5py raising RuntimeError please report it so we can add the correct
mapping!</p>
<p>The old errors module (h5py.h5e) has also been removed.  There is no public
error-management API.</p>
</div>
<div class="section" id="file-mode-property-is-now-either-r-or-r">
<h3>File .mode property is now either &#8216;r&#8217; or &#8216;r+<a class="headerlink" href="#file-mode-property-is-now-either-r-or-r" title="Permalink to this headline">¶</a></h3>
<p>Files can be opened using the same mode arguments as before, but now the
property File.mode will always return &#8216;r&#8217; (read-only) or &#8216;r+&#8217; (read-write).</p>
</div>
<div class="section" id="long-deprecated-dict-methods-have-been-removed">
<h3>Long-deprecated dict methods have been removed<a class="headerlink" href="#long-deprecated-dict-methods-have-been-removed" title="Permalink to this headline">¶</a></h3>
<p>Certain ancient aliases for Group/AttributeManager methods (e.g. <tt class="docutils literal"><span class="pre">listnames</span></tt>)
have been removed.
Please use the standard Python dict interface (Python 2 or Python 3 as
appropriate) to interact with these objects.</p>
</div>
</div>
<div class="section" id="known-issues">
<h2>Known issues<a class="headerlink" href="#known-issues" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Thread support has been improved in h5py 2.0. However, we still recommend
that for your own sanity you use locking to serialize access to files.</li>
<li>There are reports of crashes related to storing object and region references.
If this happens to you, please post on the mailing list or contact the h5py
author directly.</li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">What&#8217;s new in h5py 2.0</a><ul>
<li><a class="reference internal" href="#enhancements-unlikely-to-affect-compatibility">Enhancements unlikely to affect compatibility</a></li>
<li><a class="reference internal" href="#changes-which-may-break-existing-code">Changes which may break existing code</a><ul>
<li><a class="reference internal" href="#supported-hdf5-python-versions">Supported HDF5/Python versions</a></li>
<li><a class="reference internal" href="#group-dataset-and-datatype-constructors-have-changed">Group, Dataset and Datatype constructors have changed</a></li>
<li><a class="reference internal" href="#unicode-is-now-used-for-object-names">Unicode is now used for object names</a></li>
<li><a class="reference internal" href="#file-objects-must-be-manually-closed">File objects must be manually closed</a></li>
<li><a class="reference internal" href="#changes-to-scalar-slicing-code">Changes to scalar slicing code</a></li>
<li><a class="reference internal" href="#array-scalars-now-always-returned-when-indexing-a-dataset">Array scalars now always returned when indexing a dataset</a></li>
<li><a class="reference internal" href="#reading-object-like-data-strips-special-type-information">Reading object-like data strips special type information</a></li>
<li><a class="reference internal" href="#the-selections-module-has-been-removed">The selections module has been removed</a></li>
<li><a class="reference internal" href="#the-h5error-exception-class-has-been-removed-along-with-h5py-h5e">The H5Error exception class has been removed (along with h5py.h5e)</a></li>
<li><a class="reference internal" href="#file-mode-property-is-now-either-r-or-r">File .mode property is now either &#8216;r&#8217; or &#8216;r+</a></li>
<li><a class="reference internal" href="#long-deprecated-dict-methods-have-been-removed">Long-deprecated dict methods have been removed</a></li>
</ul>
</li>
<li><a class="reference internal" href="#known-issues">Known issues</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="2.1.html"
                        title="previous chapter">What&#8217;s new in h5py 2.1</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../contributing.html"
                        title="next chapter">Bug Reports &amp; Contributions</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/whatsnew/2.0.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../contributing.html" title="Bug Reports &amp; Contributions"
             >next</a> |</li>
        <li class="right" >
          <a href="2.1.html" title="What’s new in h5py 2.1"
             >previous</a> |</li>
        <li><a href="../index.html">h5py 2.5.0 documentation</a> &raquo;</li>
          <li><a href="index.html" >&#8220;What&#8217;s new&#8221; documents</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, Andrew Collette and contributors.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>