<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>HDF5 Dimension Scales &mdash; h5py 2.5.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.5.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="h5py 2.5.0 documentation" href="../index.html" />
    <link rel="next" title="Configuring h5py" href="../config.html" />
    <link rel="prev" title="HDF5 Attributes" href="attr.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../config.html" title="Configuring h5py"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="attr.html" title="HDF5 Attributes"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">h5py 2.5.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="hdf5-dimension-scales">
<span id="dimension-scales"></span><h1>HDF5 Dimension Scales<a class="headerlink" href="#hdf5-dimension-scales" title="Permalink to this headline">Â¶</a></h1>
<p>Datasets are multidimensional arrays. HDF5 provides support for labeling the
dimensions and associating one or &#8220;dimension scales&#8221; with each dimension. A
dimension scale is simply another HDF5 dataset. In principle, the length of the
multidimensional array along the dimension of interest should be equal to the
length of the dimension scale, but HDF5 does not enforce this property.</p>
<p>The HDF5 library provides the H5DS API for working with dimension scales. H5py
provides low-level bindings to this API in <tt class="xref py py-mod docutils literal"><span class="pre">h5py.h5ds</span></tt>. These low-level
bindings are in turn used to provide a high-level interface through the
<tt class="docutils literal"><span class="pre">Dataset.dims</span></tt> property. Suppose we have the following data file:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">f</span> <span class="o">=</span> <span class="n">File</span><span class="p">(</span><span class="s">&#39;foo.h5&#39;</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">)</span>
<span class="n">f</span><span class="p">[</span><span class="s">&#39;data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="s">&#39;f&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>HDF5 allows the dimensions of <tt class="docutils literal"><span class="pre">data</span></tt> to be labeled, for example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">f</span><span class="p">[</span><span class="s">&#39;data&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dims</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="s">&#39;z&#39;</span>
<span class="n">f</span><span class="p">[</span><span class="s">&#39;data&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dims</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">label</span> <span class="o">=</span> <span class="s">&#39;x&#39;</span>
</pre></div>
</div>
<p>Note that the first dimension, which has a length of 4, has been labeled &#8220;z&#8221;,
the third dimension (in this case the fastest varying dimension), has been
labeled &#8220;x&#8221;, and the second dimension was given no label at all.</p>
<p>We can also use HDF5 datasets as dimension scales. For example, if we have:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">f</span><span class="p">[</span><span class="s">&#39;x1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="n">f</span><span class="p">[</span><span class="s">&#39;x2&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mf">1.1</span><span class="p">]</span>
<span class="n">f</span><span class="p">[</span><span class="s">&#39;y1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="n">f</span><span class="p">[</span><span class="s">&#39;z1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span>
</pre></div>
</div>
<p>We are going to treat the <tt class="docutils literal"><span class="pre">x1</span></tt>, <tt class="docutils literal"><span class="pre">x2</span></tt>, <tt class="docutils literal"><span class="pre">y1</span></tt>, and <tt class="docutils literal"><span class="pre">z1</span></tt> datasets as
dimension scales:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">f</span><span class="p">[</span><span class="s">&#39;data&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dims</span><span class="o">.</span><span class="n">create_scale</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="s">&#39;x1&#39;</span><span class="p">])</span>
<span class="n">f</span><span class="p">[</span><span class="s">&#39;data&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dims</span><span class="o">.</span><span class="n">create_scale</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="s">&#39;x2&#39;</span><span class="p">],</span> <span class="s">&#39;x2 name&#39;</span><span class="p">)</span>
<span class="n">f</span><span class="p">[</span><span class="s">&#39;data&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dims</span><span class="o">.</span><span class="n">create_scale</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="s">&#39;y1&#39;</span><span class="p">],</span> <span class="s">&#39;y1 name&#39;</span><span class="p">)</span>
<span class="n">f</span><span class="p">[</span><span class="s">&#39;data&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dims</span><span class="o">.</span><span class="n">create_scale</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="s">&#39;z1&#39;</span><span class="p">],</span> <span class="s">&#39;z1 name&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>When you create a dimension scale, you may provide a name for that scale. In
this case, the <tt class="docutils literal"><span class="pre">x1</span></tt> scale was not given a name, but the others were. Now we
can associate these dimension scales with the primary dataset:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">f</span><span class="p">[</span><span class="s">&#39;data&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dims</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">attach_scale</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="s">&#39;z1&#39;</span><span class="p">])</span>
<span class="n">f</span><span class="p">[</span><span class="s">&#39;data&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dims</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">attach_scale</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="s">&#39;y1&#39;</span><span class="p">])</span>
<span class="n">f</span><span class="p">[</span><span class="s">&#39;data&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dims</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">attach_scale</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="s">&#39;x1&#39;</span><span class="p">])</span>
<span class="n">f</span><span class="p">[</span><span class="s">&#39;data&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dims</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">attach_scale</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="s">&#39;x2&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>Note that two dimension scales were associated with the third dimension of
<tt class="docutils literal"><span class="pre">data</span></tt>. You can also detach a dimension scale:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">f</span><span class="p">[</span><span class="s">&#39;data&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dims</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">detach_scale</span><span class="p">(</span><span class="n">f</span><span class="p">[</span><span class="s">&#39;x2&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>but for now, lets assume that we have both <tt class="docutils literal"><span class="pre">x1</span></tt> and <tt class="docutils literal"><span class="pre">x2</span></tt> still associated
with the third dimension of <tt class="docutils literal"><span class="pre">data</span></tt>. You can attach a dimension scale to any
number of HDF5 datasets, you can even attach it to multiple dimensions of a
single HDF5 dataset.</p>
<p>Now that the dimensions of <tt class="docutils literal"><span class="pre">data</span></tt> have been labeled, and the dimension scales
for the various axes have been specified, we have provided much more context
with which <tt class="docutils literal"><span class="pre">data</span></tt> can be interpreted. For example, if you want to know the
labels for the various dimensions of <tt class="docutils literal"><span class="pre">data</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">dim</span><span class="o">.</span><span class="n">label</span> <span class="k">for</span> <span class="n">dim</span> <span class="ow">in</span> <span class="n">f</span><span class="p">[</span><span class="s">&#39;data&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dims</span><span class="p">]</span>
<span class="go">[&#39;z&#39;, &#39;&#39;, &#39;x&#39;]</span>
</pre></div>
</div>
<p>If you want the names of the dimension scales associated with the &#8220;x&#8221; axis:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="p">[</span><span class="s">&#39;data&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dims</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="go">[&#39;&#39;, &#39;x2 name&#39;]</span>
</pre></div>
</div>
<p><tt class="xref py py-meth docutils literal"><span class="pre">items()</span></tt> and <tt class="xref py py-meth docutils literal"><span class="pre">values()</span></tt> methods are also provided. The dimension
scales themselves can also be accessed with:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">f</span><span class="p">[</span><span class="s">&#39;data&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dims</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
<p>or:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">f</span><span class="p">[</span><span class="s">&#39;data&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dims</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="s">&#39;x2 name&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>such that:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="p">[</span><span class="s">&#39;data&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dims</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">f</span><span class="p">[</span><span class="s">&#39;x2&#39;</span><span class="p">]</span>
<span class="go">True</span>
</pre></div>
</div>
<p>though, beware that if you attempt to index the dimension scales with a string,
the first dimension scale whose name matches the string is the one that will be
returned. There is no guarantee that the name of the dimension scale is unique.</p>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="attr.html"
                        title="previous chapter">HDF5 Attributes</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../config.html"
                        title="next chapter">Configuring h5py</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/high/dims.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../config.html" title="Configuring h5py"
             >next</a> |</li>
        <li class="right" >
          <a href="attr.html" title="HDF5 Attributes"
             >previous</a> |</li>
        <li><a href="../index.html">h5py 2.5.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, Andrew Collette and contributors.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>